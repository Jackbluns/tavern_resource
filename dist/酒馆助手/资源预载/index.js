function extract_preload_node(preload){return $("<div>").attr("id",`script_preload-${preload.title}`).append(preload.assets.map((asset=>$("<link>").attr("rel","preload").attr("href",asset).attr("as","image"))))}$((async()=>{const preload_nodes=(await async function get_preloads(){return getTavernRegexes().filter((regex=>regex.enabled&&regex.script_name.includes("预载-"))).map((regex=>({title:regex.script_name.replace("预载-","").replaceAll(/【.+?】/gs,""),assets:regex.replace_string.split("\n").map((asset=>asset.trim())).filter((asset=>!!asset))})))}()).map(extract_preload_node);!function reappend_preloads(nodes){const head=$("head",window.parent.document);head.find("#script_preload").remove(),head.append(nodes)}($("<div>").attr("id","script_preload").append(preload_nodes))}));