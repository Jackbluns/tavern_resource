var e={235:()=>{eventOn(tavern_events.MESSAGE_UPDATED,(e=>{toastr.error(`Ë∞ÅËÆ©‰Ω†Âä®ÊàëÁ¨¨ ${e} Ê•ºÊ∂àÊÅØÁöÑüò°`,"Âπ≤‰ªÄ‰πà!")}))},504:()=>{$((()=>{toastr.success("‰Ω†Â∑≤ÁªèÊàêÂäüÂä†ËΩΩÁ§∫‰æãËÑöÊú¨!","ÊÅ≠Âñú‰Ω†!")})),$(window).on("unload",(()=>{toastr.info("‰Ω†Â∑≤ÁªèÂç∏ËΩΩÁ§∫‰æãËÑöÊú¨!","ÂÜçËßÅ!")}))},510:()=>{function e(e){$("#range_block_openai :input").prop("disabled",e),$("#openai_settings > div:first-child :input").prop("disabled",e),$("#stream_toggle").prop("disabled",!1),$("#openai_show_thoughts").prop("disabled",!1)}$((()=>{e(!0)})),$(window).on("unload",(()=>e(!1)))}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,o),r.exports}o(504);const a="ÈÖíÈ¶ÜÂä©ÊâãÁºñÂÜôÁ§∫‰æã",n=/<Checkbox>(.+?)<\/Checkbox>/s;var r,i,c;async function l(e){const t=getChatMessages(e)[0].message.match(n);if(!t)return;const o=c.extract_checkbox_element(t[1]),a=retrieveDisplayedMessage(e),r=a.find('.roleplay_checkbox, pre:contains("<Checkbox>")');r.length>0&&(r.remove(),a.append(o))}async function s(){$("#chat").children(".mes[is_user='false'][is_system='false']").each(((e,t)=>{l(Number(t.getAttribute("mesid")))}))}(i=r||(r={})).update=async function(){const e=i.option;return i.option=await async function(){const e={"ÂºÄÂêØÂàôÁõ¥Êé•ÂèëÈÄÅÔºåÂÖ≥Èó≠ÂàôÂ°´Âú®ËæìÂÖ•":e=>({should_send_directly:e})};return _.merge({},...(await getLorebookEntries(a)).filter((e=>e.comment.startsWith("ËÆæÁΩÆ-"))).map((e=>({option:e.comment.replace("ËÆæÁΩÆ-",""),value:e.enabled}))).map((({option:t,value:o})=>t in e?e[t]?.(o):void 0)))}(),!_.isEqual(i.option,e)},function(e){let t;e.update=async function(){const e=t;return t=await async function(){const e=(await getLorebookEntries(a)).filter((e=>e.comment.startsWith("Ê†∑Âºè-")&&e.enabled));return 0===e.length?'<style>.roleplay_checkbox_back{background:linear-gradient(160deg, rgba(45, 45, 45, 0.75), rgba(35, 35, 35, 0.85));border-radius:14px;box-shadow:0 10px 28px rgba(0,0,0,.15),0 3px 10px rgba(0,0,0,.12);padding:16px 18px;display:flex;flex-direction:column;gap:10px;border:1px solid hsla(0,0%,100%,.06);max-width:100%;margin:20px 0}.roleplay_checkbox_title{font-size:.94em;font-weight:600;color:#f0f0f0;padding-right:12px;letter-spacing:.02em;text-align:left;margin-bottom:4px}.roleplay_checkbox_content{font-size:.94em;line-height:1.55;color:#c6c6c6;font-weight:normal;transition:color .25s ease;text-align:left;flex:1;letter-spacing:.015em;overflow-wrap:anywhere}.roleplay_checkbox_content:not(:empty):not(.short-content)~.roleplay_checkbox_title{width:100%;margin-bottom:8px;border-bottom:1px solid hsla(0,0%,100%,.08);padding-bottom:6px}.roleplay_checkbox_content.short-content{flex:1}.roleplay_checkbox_hr{display:none}.roleplay_checkbox_item{position:relative;background:rgba(50,50,50,.65);border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.1);padding:14px 16px;cursor:default;border:1px solid hsla(0,0%,100%,.04);transition:all .25s cubic-bezier(0.25, 0.8, 0.25, 1);overflow:hidden;display:flex;flex-wrap:wrap;align-items:flex-start;z-index:1;margin:2px 0;color:#d8d8d8;font-weight:400;line-height:1.5}.roleplay_checkbox_item::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg, rgba(90, 90, 90, 0.06) 0%, transparent 70%);opacity:0;transition:opacity .3s ease;z-index:-1}.roleplay_checkbox_item:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(to bottom, rgba(160, 160, 160, 0.6), rgba(180, 180, 180, 0.3));transform:scaleY(0);transform-origin:top;transition:transform .3s cubic-bezier(0.4, 0, 0.2, 1)}.last_mes .roleplay_checkbox_item{cursor:pointer}.last_mes .roleplay_checkbox_item:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.15);background:rgba(58,58,58,.75);border-color:rgba(200,200,200,.12)}.last_mes .roleplay_checkbox_item:hover::after{opacity:1}.last_mes .roleplay_checkbox_item:hover .roleplay_checkbox_content{color:#e2e2e2}.last_mes .roleplay_checkbox_item:active{transform:translateY(-1px);box-shadow:0 3px 8px rgba(0,0,0,.12)}.last_mes .roleplay_checkbox_item:hover:before{transform:scaleY(1)}@media(max-width: 768px){.roleplay_checkbox_back{padding:14px;gap:8px}.roleplay_checkbox_item{padding:12px 14px}.roleplay_checkbox_title{font-size:.9em;padding-right:10px}.roleplay_checkbox_content{font-size:.9em;line-height:1.5}}@media(prefers-reduced-motion: reduce){.roleplay_checkbox_item{transition:none}.roleplay_checkbox_item::before,.roleplay_checkbox_item::after{transition:none}.roleplay_checkbox_content,.roleplay_checkbox_title{transition:none}}</style>':e[0].content}(),!_.isEqual(t,e)},e.extract_checkbox_element=function(e){const o=$('<div class="roleplay_checkbox">');return o.append(t),o.append($('<div class="roleplay_checkbox_back">').append([...e.matchAll(/(.+?)[:Ôºö]\s*(.+)/gm)].map((e=>({title:e[1],content:e[2].replace(/^\$\{(.+)\}$/,"$1").replace(/^„Äå(.+)„Äç$/,"$1")}))).map((({title:e,content:t})=>$('<div class="roleplay_checkbox_item" tabindex="1">').on("click",(function(){!async function(e){if(e.parents(".last_mes").length>0){const t=e.find(".roleplay_checkbox_content").text().trim();triggerSlash(r.option.should_send_directly?`/send ${t} || /trigger`:`/setinput ${t}`)}}($(this))})).append(`<span class="roleplay_checkbox_title"><strong>${e}</strong></span>`).append('<hr class="roleplay_checkbox_hr">').append(`<span class="roleplay_checkbox_content">${t}</span>`))))),o}}(c||(c={})),$((async()=>{await errorCatched(r.update)(),await errorCatched(c.update)(),await errorCatched(s)(),eventOn(tavern_events.CHAT_CHANGED,errorCatched(s)),eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED,errorCatched(l)),eventOn(tavern_events.MESSAGE_UPDATED,errorCatched(l)),eventOn(tavern_events.MESSAGE_SWIPED,errorCatched(l)),eventOn(tavern_events.MESSAGE_DELETED,(()=>setTimeout(errorCatched(s),1e3))),eventOn(tavern_events.WORLDINFO_UPDATED,errorCatched((async e=>{e===a&&(await r.update()||await c.update())&&await s()})))}));o(510),o(235);